<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.gduf.repository.StudentDao">

    <select id="getStudent" parameterType="String" resultType="Student">
        select * from student
        where s_no = #{no}
    </select>

    <select id="getCourses" parameterType="String" resultType="Course">
        select c.* from stu_course sc ,course c
        where sc.c_no=c.c_no and sc.s_no=#{no}
    </select>

    <delete id="deteleStudent" parameterType="String" >
        delete from stu_cousrse
        where s_no=#{no}
    </delete>

    <select id="getCourseTime" parameterType="String" resultType="String">
        select hc_time from course
        where  c_no=#{cno}
    </select>

    <select id="getCoursesTime" parameterType="String" resultType="String">
        select c.hc_time from course c,stu_course sc
        where c.c_no=sc.c_no and sc.s_no=#{no}
    </select>

    <insert id="insertCourse" parameterType="String">
        insert into stu_course (s_no,c_no)
        values (#{sno},#{cno})
    </insert>

    <select id="getAllCourses" resultType="course">
        select * from course
        where ac_time='2020上学期'
    </select>
    <!-- 选课课程分页 -->
    <select id="findByPageCourse" parameterType="Map" resultType="course">
        select * from course
        where ac_time='2020上学期'
        <if test="start!=null and size!=null">
            limit #{start},#{size}
        </if>
    </select>
    <select id="getCount" parameterType="String" resultType="int">
        select count(*) from course where ac_time='2020上学期'
    </select>
    <delete id="deleteCourse" parameterType="String" >
        delete from stu_course
        where c_no=#{cno} and s_no=#{sno}
    </delete>
</mapper>
